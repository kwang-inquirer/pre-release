<template>
    <div class="slds-card">
        <div class="slds-card__header slds-grid slds-grid_align-center">
            <template if:true={showCheckout}>
                <lightning-progress-indicator class="slds-size_1-of-1" current-step={currentStep} type="path">
                    <template for:each={steps} for:item="step">
                        <lightning-progress-step label={step.label} value={step.value} key={step.value}></lightning-progress-step>
                    </template>
                </lightning-progress-indicator>
            </template>
        </div>
        <div class="slds-card__body">
            <template if:true={hasErrors}>
                <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error slds-m-vertical_x-small" role="alert">
                    <ul>
                        <template for:each={errors} for:item="error">
                            <li key={error}>
                                <h2>{error}</h2>
                            </li>
                        </template>
                    </ul>
                </div>
            </template>
            <div class="slds-grid slds-wrap slds-align_absolute-center">
                <template if:true={showCheckout}>
                    <template if:true={billingActive}>
                        <div class="slds-size_1-of-1 slds-p-horizontal_small">
                            <c-checkout-address label="Billing" subscription={subscription} address={checkout.billingAddress} onnext={handleNext} show-next show-name required>
                            </c-checkout-address>
                        </div>
                    </template>
                    <template if:true={paymentActive}>
                        <div class="slds-size_1-of-1 slds-p-horizontal_small">
                            <c-checkout-payment subscription={subscription} payment={checkout.payment} onprevious={handlePrevious} onnext={handleNext} show-submit show-previous update-billing-info required>
                            </c-checkout-payment>
                        </div>
                    </template>
                    <template if:true={completeActive}>
                        <div class="slds-size_1-of-1 slds-p-horizontal_small">
                            Payment update has successfully processed
                        </div>
                    </template>
                </template>
                <c-global-loading loading={loading}></c-global-loading>
            </div>
        </div>
    </div>
</template>